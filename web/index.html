<!DOCTYPE HTML>
<html>
<head id="hed">
	<title>thrown-away</title>
	<script src="../../src/brython.js"></script>
	
</head>
<body onLoad="brython()">
	<h1>thrown-away</h1>
	<form>
		<ul id="input_list">
			<li><input type="text" name="name" id="name" placeholder="usr"/></li>
			<li><input type="text" name="name" id="name" placeholder="usr"/></li>
		</ul>
		<input type="button" value="add row" onclick="add_row()"/>
		<input type="button" value="submit" onclick="main()"/>
		<input type="button" value="test" onclick="test()"/>
	</form>
	<div id="output">
	</div>
	
	<script type="text/python">
		def main():
			usernames = get_usernames()
			print(usernames)

		def add_row():
			list_str = '<li><input type="text" name="name" id="name" placeholder="usr"/></li>'
			doc['input_list'].html += list_str

		def get_usernames():
			usernames = []
			inputs = doc.get(name="name")
			for input in inputs:
				if input.value == '':
					continue
				else:
					usernames.append(input.value)
			return usernames

		def on_complete(req):
			if req.status == 200 or req.status == 0:
				print(dir(req))
				print(req.text)
			else:
				print("error")

		def test():
			data = JSObject(req)
			print(req)
			print(req.mmosskicker)

	</script>
	<script type="text/javascript" charset="utf-8">
		// super hacky getter function so brython can access json
		var req = {};
		function callback(reddit_data){
			console.log(reddit_data.data.name);
			var name = reddit_data.data.name;
			req[name] = reddit_data;
			console.log(req);
		}

		function add_tag(user){
			var head= document.getElementsByTagName('head')[0];
	    	var script= document.createElement('script');
	    	script.type= 'text/javascript';
	    	script.src= 'http://www.reddit.com/user/' + user + '/about.json?jsonp=callback';
	    	head.appendChild(script);
	    }

	    function testing(){
	    	console.log("FUCKSDFSKDJFAD");
	    }

	    add_tag('mmosskicker');
	    add_tag('yten');
	</script>

	<!-- <script src="http://www.reddit.com/user/mmosskicker/about.json?jsonp=callback"></script> -->
</body>
</html>
